(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{35:function(e,t,n){},37:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(12),s=n.n(r),o=(n(35),n(3)),i=n.n(o),d=n(6),u=n(4),b=(n.p,n(37),n(8)),l=n.n(b),j=n(5),f=n(7),p=(n(56),n(57),n(27)),O=n(28),h=n(29),x=n(2);var v=function(e){var t=Object(a.useState)(),n=Object(u.a)(t,2),c=(n[0],n[1]),r=Object(a.useRef)();return Object(a.useEffect)((function(){e.note.description&&c(e.note.description),r.current.focus()}),[]),Object(x.jsx)("div",{children:Object(x.jsxs)("form",{onSubmit:function(t){return e.handlePatchDescription(t)},children:[Object(x.jsx)("textarea",{ref:r,onChange:function(t){return e.setNoteDesc(t.target.value)},value:e.noteDesc}),Object(x.jsx)("button",{children:"dodaj"})]})})};var m=function(e){return Object(x.jsx)("form",{onSubmit:function(t){t.preventDefault(),e.setPatchTitle(!1),e.fetchNotes()},children:Object(x.jsx)("input",{className:"note-title-form__input",onChange:function(t){return function(t){e.setNote(Object(j.a)(Object(j.a)({},e.note),{},{title:t.target.value}))}(t)},value:e.note.title})})},g=n(69);var _=function(e){var t=e.comment,n=t.content,c=t.date,r=new Date(c),s=Object(a.useState)(0),o=Object(u.a)(s,2),i=o[0],d=o[1];Object(a.useEffect)((function(){setTimeout((function(){d((function(e){return e++}))}),3e3),console.log(i)}),[i]);var b={fontSize:"13px"};return Object(x.jsxs)("div",{style:{marginTop:"20px",display:"flex",alignItems:"center"},children:[Object(x.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f18484",width:"30px",height:"30px",borderRadius:"50%",color:"white"},children:Object(x.jsx)("span",{children:"G"})}),Object(x.jsxs)("div",{style:{marginLeft:"14px",width:"500px"},children:[Object(x.jsxs)("div",{style:{display:"flex",padding:"5px 0",alignItems:"center",marginBottom:"5px"},children:[Object(x.jsx)("p",{style:{marginRight:"7px",fontWeight:"600"},children:"Guest"}),function(){var e=Date.now()-r.getTime();return console.log(e/6e4),e<6e3?Object(x.jsx)("div",{style:b,children:"few seconds ago "}):6e3<e&&e<36e5?Object(x.jsxs)("div",{style:b,children:[Math.ceil(e/6e4)," minutes ago"]}):Object(x.jsxs)("p",{style:b,children:[r.getHours(),":",r.getMinutes()," ",Object(x.jsxs)("span",{style:{marginLeft:"6px"},children:[r.getDay()<10?"0"+r.getDay():r.getDay(),".",r.getMonth()<10?"0"+r.getMonth():r.getMonth(),".",r.getFullYear()," "]})]})}()]}),Object(x.jsx)("div",{children:Object(x.jsx)("p",{style:{padding:"5px",backgroundColor:"white",borderRadius:"5px"},children:n})})]})]})};n(67);var N=function(e){var t=Object(a.useState)(!0),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),o=Object(u.a)(s,2),b=(o[0],o[1]),N=Object(a.useState)(!1),w=Object(u.a)(N,2),y=w[0],k=w[1],D=Object(a.useState)(!1),S=Object(u.a)(D,2),I=S[0],C=S[1],E=Object(a.useState)(),R=Object(u.a)(E,2),T=R[0],P=R[1],B=Object(a.useRef)(),M=Object(a.useState)(),L=Object(u.a)(M,2),F=L[0],A=L[1],z=function(){var t=Object(d.a)(i.a.mark((function t(n){var a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=new FormData,console.log(F),a.append("file",F,F.name),t.next=6,l.a.post("/upload",a);case 6:c=t.sent,e.setNote(Object(j.a)(Object(j.a)({},e.note),{},{attachments:[].concat(Object(f.a)(e.note.attachments),[c.data.file.filename])}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){void 0===e.note.comments&&e.setNote(Object(j.a)(Object(j.a)({},e.note),{},{comments:[]})),void 0===e.note.attachments&&e.setNote(Object(j.a)(Object(j.a)({},e.note),{},{attachments:[]})),console.log(e.note)}),[]),Object(x.jsx)("div",{onClick:function(){c&&B.current.addEventListener("click",e.setShowDetails(!1))},className:"note-details",children:Object(x.jsx)("div",{onMouseEnter:function(){r(!1)},onMouseLeave:function(){r(!0)},className:"note-details__wrapper",children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"note-details__top",children:[Object(x.jsx)(p.a,{className:"note-details__icon"}),Object(x.jsxs)("div",{onClick:function(){return k(!0)},className:"note-details__header__wrapper",children:[y?Object(x.jsx)(m,{fetchNotes:e.fetchNotes,setPatchTitle:k,note:e.note,setNote:e.setNote}):Object(x.jsx)("h3",{className:"note-details__header",children:e.note.title}),Object(x.jsxs)("p",{children:["na li\u015bcie: ",Object(x.jsx)("span",{children:e.boardTitle})]})]})]}),Object(x.jsx)("div",{style:{display:"flex",marginLeft:44,marginBottom:8},children:e.note.attachments&&e.note.attachments.map((function(e){return Object(x.jsxs)("div",{onClick:function(){!function(e){window.open("http://localhost:3001/file/image/"+e,"_blank")}(e)},style:{padding:5,backgroundColor:"#fff",border:"1px solid black",marginRight:4,borderRadius:6},className:"attachment__image__wrapper",children:[" ",Object(x.jsx)("img",{style:{objectFit:"contain",width:"50px",height:"auto"},src:"file/image/"+e})," "]})}))}),Object(x.jsxs)("div",{className:"note-detaild__middle",children:[Object(x.jsx)(O.a,{className:"note-details__icon"}),Object(x.jsxs)("div",{className:"note-details__details__wrapper",children:[Object(x.jsx)("h4",{children:"Opis"}),Object(x.jsxs)("form",{style:{display:"flex",marginTop:4},onSubmit:z,children:[Object(x.jsx)("input",{ref:B,name:"file",type:"file",title:"dsdsdsd",onChange:function(e){A(e.target.files[0])}}),Object(x.jsx)("button",{type:"submit",style:F?{display:"block"}:{display:"none"},children:" add file "})]}),Object(x.jsx)("div",{className:"note-details__details__description",children:I?Object(x.jsx)(v,{noteDesc:e.noteDesc,setNoteDesc:e.setNoteDesc,handlePatchDescription:e.handlePatchDescription,note:e.note,description:e.note.description,setNoteDescription:b,boardId:e.boardId,_id:e.note._id}):Object(x.jsx)("form",{children:Object(x.jsx)("textarea",{onClick:function(){return C(!0)},onChange:function(e){return b(e.target.value)},value:e.noteDesc})})})]})]}),Object(x.jsxs)("div",{className:"note-details__bottom",children:[Object(x.jsx)(h.a,{className:"note-details__icon"}),Object(x.jsxs)("div",{className:"note-details__comments",children:[Object(x.jsx)("h4",{children:"Aktywno\u015b\u0107"}),Object(x.jsx)("form",{ref:B,onSubmit:function(t){!function(t){t.preventDefault(),e.setNote(Object(j.a)(Object(j.a)({},e.note),{},{comments:[{id:Object(g.a)(),content:T,date:Date.now()}].concat(Object(f.a)(e.note.comments))})),B.current.reset()}(t)},children:Object(x.jsx)("input",{onChange:function(e){P(e.target.value)},className:"comment-input",placeholder:"napisz komentarz"})})]})]}),Object(x.jsx)("div",{style:{display:"block"},children:e.note.comments&&e.note.comments.map((function(e){return Object(x.jsx)(_,{comment:e})}))})]})})})},w=n(15);var y=function(e){var t=e.note,n=t._id,c=t.title,r=(t.description,Object(a.useState)()),s=Object(u.a)(r,2),o=s[0],b=s[1],f=Object(a.useState)(!1),p=Object(u.a)(f,2),O=p[0],h=p[1],v=Object(a.useState)(""),m=Object(u.a)(v,2),g=m[0],_=m[1];Object(a.useEffect)((function(){b(e.note),_(e.note.description)}),[]),Object(a.useEffect)((function(){o&&function(){var t=Object(d.a)(i.a.mark((function t(){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("boards/".concat(e.boardId));case 2:return n=t.sent,a=n.data.content.map((function(e){return e._id==o._id?o:e})),t.next=6,l.a.patch("/boards/createNote/".concat(e.boardId),{content:a});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[o]),Object(a.useEffect)((function(){O?e.setDraggable(!1):e.setDraggable(!0)}),[O]);var y=function(){var t=Object(d.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,l.a.get("boards/".concat(e.boardId));case 3:a=t.sent,a.data.content.map((function(e){return e._id==o._id?(b(Object(j.a)(Object(j.a)({},o),{},{description:g})),Object(j.a)(Object(j.a)({},o),{},{description:g})):e}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"note",children:[Object(x.jsxs)("div",{className:"note__content",children:[Object(x.jsx)("p",{onClick:function(){return h(!O)},children:c}),Object(x.jsx)("button",{onClick:function(){e.deleteNote(n)},children:Object(x.jsx)(w.a,{})})]}),O?function(){if(!0===O)return Object(x.jsx)(N,{fetchNotes:e.fetchNotes,noteDesc:g,setNoteDesc:_,handlePatchDescription:y,boardId:e.boardId,showDetails:O,setShowDetails:h,boardTitle:e.boardTitle,setNote:b,note:o})}():""]})},k=(n(59),n(30));var D=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=(n[0],n[1],Object(a.useRef)());return Object(x.jsx)("div",{children:Object(x.jsx)("form",{ref:c,onSubmit:function(t){!function(t){t.preventDefault(),e.createNote(),c.current.reset()}(t)},className:"add-card__form",children:Object(x.jsxs)("div",{className:"add-card__input__wrapper",children:[Object(x.jsx)(k.a,{onClick:function(){return c.current.focus()}}),Object(x.jsx)("input",{className:"add-card__input",placeholder:"add card",onChange:function(t){return e.setNoteTitle(t.target.value)}})]})})})},S=n(11);var I=function(e){var t=e.board,n=t._id,c=t.title,r=Object(a.useState)(),s=Object(u.a)(r,2),o=s[0],b=s[1],p=Object(a.useState)(c),O=Object(u.a)(p,2),h=O[0],v=O[1],m=Object(a.useState)(),g=Object(u.a)(m,2),_=g[0],N=g[1],w=Object(a.useState)(),k=Object(u.a)(w,2),I=k[0],C=k[1],E=Object(a.useState)(!0),R=Object(u.a)(E,2),T=R[0],P=R[1],B=(Object(a.useRef)(),function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/boards/".concat(n));case 2:t=e.sent,C(t.data.content);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(a.useEffect)((function(){B(),b(e.board)}),[]),Object(a.useEffect)((function(){var t=function(){var e=Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=I,!e.t0){e.next=4;break}return e.next=4,l.a.patch("/boards/createNote/".concat(n),{content:I});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();C(e.board.content),t()}),[e.boards]),Object(a.useEffect)((function(){var t=function(){var e=Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.patch("/boards/updateTitle/".concat(n),{title:o.title});case 2:return e.next=4,l.a.patch("/boards/createNote/".concat(n),{content:o.content});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var t=Object(d.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("/boards");case 2:n=t.sent,e.setBoards(n.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();o&&t(),a()}),[o]);var M=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/notes",{title:_});case 2:return t=e.sent,e.next=5,l.a.patch("/boards/createNote/".concat(n),{content:[].concat(Object(f.a)(I),[t.data])});case 5:e.sent,C([].concat(Object(f.a)(I),[t.data])),b(Object(j.a)({},o));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.filter((function(e){return e._id!==t})),e.next=3,l.a.patch("/boards/createNote/".concat(n),{content:a});case 3:C(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"board",children:[Object(x.jsx)("div",{className:"boardInput",children:Object(x.jsx)("form",{onSubmit:function(e){return function(e){e.preventDefault(),b(Object(j.a)(Object(j.a)({},o),{},{title:h}))}(e)},children:Object(x.jsx)("input",{placeholder:"Board",onChange:function(e){v(e.target.value)},value:h})})}),Object(x.jsx)(S.c,{droppableId:n,children:function(e){return Object(x.jsxs)("div",Object(j.a)(Object(j.a)({},e.droppableProps),{},{ref:e.innerRef,children:[I&&I.map((function(e,t){return Object(x.jsx)(S.b,{draggableId:e._id,index:t,children:function(t){return Object(x.jsx)("div",Object(j.a)(Object(j.a)(Object(j.a)({},t.dragHandleProps),t.draggableProps),{},{ref:T?t.innerRef:null,children:Object(x.jsx)(y,{draggable:T,setDraggable:P,fetchNotes:B,board:o,setBoard:b,boardId:n,boardTitle:h,deleteNote:L,note:e})}))}},e._id)})),e.placeholder]}))}},n),Object(x.jsx)(D,{noteTitle:_,setNoteTitle:N,createNote:M})]})};n(64);var C=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!0),o=Object(u.a)(s,2),b=o[0],j=o[1],p=Object(a.useRef)(),O=function(){var t=Object(d.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.post("/boards",{title:""});case 2:n=t.sent,e.setBoards([].concat(Object(f.a)(e.boards),[n.data]));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"bottom-bar",children:[Object(x.jsx)("button",{onClick:O,className:"bottom-bar__btn create",children:"CREATE BOARD"}),Object(x.jsx)("button",{onClick:function(){return r(!0)},className:"bottom-bar__btn delete",children:"DELETE BOARD"}),c?function(){var t=function(){var t=Object(d.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.delete("/boards/".concat(n));case 2:a=e.boards.filter((function(e){return e._id!==n})),e.setBoards(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsx)("div",{ref:p,onClick:function(){b&&p.current.addEventListener("click",r(!1))},className:"delete-board__wrapper",children:Object(x.jsx)("div",{onMouseEnter:function(){j(!1)},onMouseLeave:function(){return j(!0)},className:"delete-board",children:e.boards.map((function(e){return Object(x.jsxs)("div",{className:"delete-board__item",children:[" ",e.title," ",Object(x.jsx)("button",{onClick:function(){t(e._id)},children:Object(x.jsx)(w.a,{})})," "]})}))})})}():""]})};var E=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),s=Object(u.a)(r,2),o=(s[0],s[1],Object(a.useRef)()),b=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/boards");case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){b()}),[]);var p=function(){var e=Object(d.a)(i.a.mark((function e(t){var a,r,s,o,d,b,l,p,O,h,x;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),t.destination){e.next=3;break}return e.abrupt("return");case 3:t.source.droppableId!==t.destination.droppableId?(a=n.find((function(e){return e._id==t.source.droppableId})),r=n.find((function(e){return e._id==t.destination.droppableId})),s=a.content.splice(t.source.index,1),o=Object(u.a)(s,1),d=o[0],r.content.splice(t.destination.index,0,d),c(Object(f.a)(n))):(b=n.find((function(e){return e._id==t.source.droppableId})),l=b.content,p=l.splice(t.source.index,1),O=Object(u.a)(p,1),h=O[0],l.splice(t.destination.index,0,h),x=n.map((function(e){return b._id!==e._id?e:Object(j.a)(Object(j.a)({},e),{},{content:l})})),c(Object(f.a)(x)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"home",children:[Object(x.jsx)("div",{ref:o,className:"boards__wrapper",children:Object(x.jsx)(S.a,{onDragEnd:function(e){p(e)},children:n.map((function(e){return Object(x.jsx)(I,{boards:n,setBoards:c,board:e})}))})}),Object(x.jsx)(C,{boards:n,setBoards:c})]})};n(65);var R=function(){return Object(x.jsx)("div",{className:"header",children:Object(x.jsx)("h2",{children:"My note app"})})},T=n(10);var P=function(){var e,t=[{id:"1",data:1},{id:"2",data:2},{id:"7",data:3},{id:"10",data:10}],n=[{id:"4",data:4},{id:"5",data:5},{id:"6",data:6}],c=Object(a.useState)(t),r=Object(u.a)(c,2),s=(r[0],r[1],Object(a.useState)(n)),o=Object(u.a)(s,2),i=(o[0],o[1],Object(a.useState)((e={},Object(T.a)(e,"1",{data:t}),Object(T.a)(e,"2",{data:n}),e))),d=Object(u.a)(i,2),b=(d[0],d[1],Object(a.useState)([{id:"100",data:t},{id:"200",data:n}])),l=Object(u.a)(b,2),f=l[0];return l[1],Object(x.jsx)("div",{style:{display:"flex"},children:Object(x.jsx)(S.a,{onDragEnd:function(e){if(console.log(e),e.destination)if(e.source.draggableId!==e.destination.droppableId){var t=f.find((function(t){return t.id==e.source.droppableId})),n=f.find((function(t){return t.id==e.destination.droppableId})),a=t.data.splice(e.source.index,1),c=Object(u.a)(a,1)[0];n.data.splice(e.destination.index,0,c),console.log(c,n,f[1])}else{var r=f.find((function(t){return t.id==e.source.droppableId})),s=r.data.splice(e.source.index,1),o=Object(u.a)(s,1)[0];r.data.splice(e.destination.index,0,o)}},children:f.map((function(e){return Object(x.jsx)(S.c,{droppableId:e.id,children:function(t){return Object(x.jsxs)("div",Object(j.a)(Object(j.a)({},t.droppableProps),{},{ref:t.innerRef,children:[e.data.map((function(e,t){return Object(x.jsx)(S.b,{draggableId:e.id,index:t,children:function(t){return Object(x.jsx)("div",Object(j.a)(Object(j.a)(Object(j.a)({className:"test"},t.dragHandleProps),t.draggableProps),{},{ref:t.innerRef,children:e.data}))}},e.id)})),t.placeholder]}))}},e.id)}))})})};var B=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=(t[0],t[1]);return Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("http://localhost:3001/notes");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(function(){var t=Object(d.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:a=t.sent,n(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(R,{}),Object(x.jsx)(E,{}),Object(x.jsx)(P,{})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(B,{})}),document.getElementById("root")),M()}},[[66,1,2]]]);
//# sourceMappingURL=main.92b706a2.chunk.js.map