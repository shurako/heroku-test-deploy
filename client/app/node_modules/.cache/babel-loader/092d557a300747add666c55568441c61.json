{"ast":null,"code":"import _objectSpread from\"C:/Users/patry/OneDrive/Pulpit/DB learn/client/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/patry/OneDrive/Pulpit/DB learn/client/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/patry/OneDrive/Pulpit/DB learn/client/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/patry/OneDrive/Pulpit/DB learn/client/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./Note.css';import axios from'axios';import NoteDetails from'./NoteDetails';import{FaTrash}from'react-icons/fa';import{Draggable}from'react-beautiful-dnd';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Note(props){var _props$note=props.note,_id=_props$note._id,title=_props$note.title,description=_props$note.description;var _useState=useState(),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showDetails=_useState4[0],setShowDetails=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),noteDesc=_useState6[0],setNoteDesc=_useState6[1];// ***** EFFECTS\nuseEffect(function(){setNote(props.note);setNoteDesc(props.note.description);},[]);useEffect(function(){var patchNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var notes,updatedNotes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"boards/\".concat(props.boardId));case 2:notes=_context.sent;updatedNotes=notes.data.content.map(function(item){if(item._id==note._id){return note;}else return item;});_context.next=6;return axios.patch(\"/boards/createNote/\".concat(props.boardId),{content:updatedNotes});case 6:case\"end\":return _context.stop();}}},_callee);}));return function patchNote(){return _ref.apply(this,arguments);};}();note&&patchNote();},[note]);useEffect(function(){if(showDetails){props.setDraggable(false);}else{props.setDraggable(true);}},[showDetails]);//**** FUNCTIONS\nvar handleShowDetails=function handleShowDetails(){if(showDetails===true)return/*#__PURE__*/_jsx(NoteDetails,{fetchNotes:props.fetchNotes,noteDesc:noteDesc,setNoteDesc:setNoteDesc,handlePatchDescription:handlePatchDescription,boardId:props.boardId,showDetails:showDetails,setShowDetails:setShowDetails,boardTitle:props.boardTitle,setNote:setNote,note:note});};var handlePatchDescription=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var notes,updatedNotes;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return axios.get(\"boards/\".concat(props.boardId));case 3:notes=_context2.sent;updatedNotes=notes.data.content.map(function(item){if(item._id==note._id){setNote(_objectSpread(_objectSpread({},note),{},{description:noteDesc}));return _objectSpread(_objectSpread({},note),{},{description:noteDesc});}else return item;});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handlePatchDescription(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note__content\",children:[/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return setShowDetails(!showDetails);},children:title}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){props.deleteNote(_id);},children:/*#__PURE__*/_jsx(FaTrash,{})})]}),showDetails?handleShowDetails():'']});}export default Note;","map":{"version":3,"sources":["C:/Users/patry/OneDrive/Pulpit/DB learn/client/app/src/components/Note.js"],"names":["React","useState","useEffect","axios","NoteDetails","FaTrash","Draggable","Note","props","note","_id","title","description","setNote","showDetails","setShowDetails","noteDesc","setNoteDesc","patchNote","get","boardId","notes","updatedNotes","data","content","map","item","patch","setDraggable","handleShowDetails","fetchNotes","handlePatchDescription","boardTitle","e","preventDefault","deleteNote"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport './Note.css'\r\nimport axios from 'axios'\r\nimport NoteDetails from './NoteDetails'\r\nimport {FaTrash} from 'react-icons/fa'\r\nimport { Draggable } from 'react-beautiful-dnd'\r\n\r\n\r\nfunction Note(props) {\r\n    const {_id, title, description } = props.note\r\n    const [note, setNote] = useState()\r\n    const [showDetails, setShowDetails] = useState(false)\r\n    const [noteDesc, setNoteDesc] = useState('')\r\n\r\n// ***** EFFECTS\r\n\r\n    useEffect(() => {\r\n        setNote(props.note);\r\n        setNoteDesc(props.note.description)\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const patchNote = async () => {\r\n            const notes = await axios.get(`boards/${props.boardId}`)\r\n            const updatedNotes = notes.data.content.map( item => {\r\n            if(item._id == note._id) { return note}\r\n            else return item\r\n        } )\r\n        await axios.patch(`/boards/createNote/${props.boardId}`, {content : updatedNotes})\r\n        }\r\n        \r\n       note && patchNote()\r\n    }, [note])\r\n\r\n\r\n    \r\n\r\n    useEffect(() => {\r\n        if(showDetails) {props.setDraggable(false)}\r\n        else{props.setDraggable(true)}\r\n    },[showDetails])\r\n\r\n    //**** FUNCTIONS\r\n    const  handleShowDetails = () => {\r\n        \r\n        if(showDetails === true) return <NoteDetails  fetchNotes = {props.fetchNotes} noteDesc ={noteDesc} setNoteDesc = {setNoteDesc} handlePatchDescription = {handlePatchDescription} boardId = {props.boardId} showDetails = {showDetails} setShowDetails = {setShowDetails} boardTitle = {props.boardTitle} setNote = {setNote} note = {note} />\r\n    }\r\n    const handlePatchDescription = async (e) => {\r\n        e.preventDefault()\r\n        const notes = await axios.get(`boards/${props.boardId}`)\r\n        const updatedNotes = notes.data.content.map( item => {\r\n            if(item._id == note._id) { setNote({...note, description: noteDesc}); return {...note, description: noteDesc}}\r\n            else return item\r\n        } )\r\n    }\r\n   \r\n    \r\n    return (\r\n        <div  className = 'note'>\r\n            <div   className = 'note__content'>\r\n                <p onClick = {() => setShowDetails(!showDetails)}>{title}</p>\r\n                <button onClick = {() => {props.deleteNote(_id)}} ><FaTrash/></button>\r\n            </div>\r\n\r\n            {showDetails ? handleShowDetails() : ''}\r\n            \r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Note\r\n"]},"metadata":{},"sourceType":"module"}